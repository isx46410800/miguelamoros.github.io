<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Miguel AmorÃ³s">
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>BashScripting - Miguel's Notes</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "BashScripting";
    var mkdocs_page_input_path = "bash_scripting.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Miguel's Notes</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">MkDocs</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../linux/">Linux</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../soporte/">Soporte TI</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../vscode/">VSCode</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../gitlab/">Gitlab</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../python/">Python</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../java/">Java</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">BashScripting</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#validar-argumentos">validar argumentos</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#validar-help">validar help</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#comparadores">comparadores</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#conficional-if">conficional if</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#bucle-for">bucle for</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#bucle-while">bucle while</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#bucle-esac">bucle esac</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#leer-por-entrada-standard">leer por entrada standard</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#separar-opciones-con-shift">separar opciones con shift</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#mirar-si-es-directorio-regular-file">mirar si es directorio, regular file...</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#mayusculas-copiar-buscar-ordenar">Mayusculas , copiar , buscar , ordenar</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#funciones">Funciones</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../powershell/">PowerShell/CMD</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../virtuales/">M.Virtuales</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../docker/">Docker</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../kubernetes/">Kubernetes</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../openshift/">Openshift</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../terraform/">Terraform</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../aws/">AWS</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../jenkins/">Jenkins</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../ansible/">Ansible</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../devops/">Devops</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../testing/">Testing</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../monitorizacion/">Monitorizacion</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../tomcat/">Tomcat</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../elastic/">ELKS</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../azure/">Azure</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../office/">Office 365</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../markdown/">Markdown</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../bbdd/">Base de datos</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../sap/">SAP</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../ldap/">LDAP</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../pam/">PAM</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../samba/">SAMBA</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../kerberos/">KERBEROS</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../lvm/">LVM/RAID</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../backup/">Backup</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../routing/">Routing</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../files/">Archivos Destacados</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../windows/">Windows</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../servidores/">Servidores</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../taller/">Taller</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Miguel's Notes</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>BashScripting</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/isx46410800/miguelamoros.github.io/edit/master/docs/bash_scripting.md"> Edit on isx46410800/python</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="comandos-para-bash-scripting">Comandos para Bash Scripting</h1>
<p><code>#! /bin/bash</code></p>
<h2 id="validar-argumentos">validar argumentos</h2>
<pre><code># indica el numero de argumentos pasados
echo $#
# si no tiene 2 args, plegar
if [ $# -ne 2 ]
then
    echo &quot;Num de args incorrecte&quot;
    echo &quot;USAGE: prog.sh arg1 arg2&quot;
    exit 1
fi
# mostrar los args
echo &quot;Los argumentos son $1 y $2&quot;
exit 0
</code></pre>
<h2 id="validar-help">validar help</h2>
<pre><code>#help
if [ $1 == &quot;--help&quot; -o $1 == &quot;-h&quot; ]
then
    echo &quot;mostramos ayuda&quot;
    exit 0
fi
</code></pre>
<h2 id="comparadores">comparadores</h2>
<ul>
<li>-lt / -gt / -eq / -ne / -ge / -le <em>mÃ¡s grande, menor que...</em></li>
<li>-d / -f / -h <em>directorio, file, link</em></li>
<li>-n <em>mientras sea nulo</em></li>
<li>$? <em>estatus level de error</em></li>
<li>
<blockquote>
<blockquote>
<p>/dev/stderr / &gt;&gt;/dev/null</p>
</blockquote>
</blockquote>
</li>
</ul>
<pre><code>if [ $# -eq 3 ]
then
    if ! [ &quot;$1&quot; == &quot;-b&quot; -a &quot;$2&quot; == &quot;-a&quot; ]
    then
        echo &quot;ERROR: format args incorrecte&quot;
        echo &quot;USAGE: prog arg -h / prog -a arg / prog -b -a arg&quot;
        exit $ERR_NARGS
        fi
fi
</code></pre>
<h2 id="conficional-if">conficional if</h2>
<pre><code>edad=$1
echo $edad
if [ $edad -lt 18 ]
then
    echo &quot;Es menor de edat&quot;
elif [ $edad -eq 18 ]
then
    echo &quot;18 recien cumplidos&quot;
else
    echo &quot;Ya es mayor de edad&quot;
fi
</code></pre>
<h2 id="bucle-for">bucle for</h2>
<pre><code>count=0
for arg in $*
do
    count=$((count+1))
    echo &quot;$count: $arg&quot;
done
exit 0
</code></pre>
<h2 id="bucle-while">bucle while</h2>
<pre><code>cont=0
MAX=$1
while [ $cont -le $MAX ]
do
    echo $cont
    cont=$((cont+1))
done
exit 0
</code></pre>
<h2 id="bucle-esac">bucle esac</h2>
<pre><code>for mes in $*
do
    case $mes in
        '2')
            echo &quot;$mes tiene 28 dias&quot;;;
        '1'|'3'|'5'|'7'|'8'|'10'|'12')
            echo &quot;$mes tiene 31 dias&quot;;;
        '2'|'4'|'6'|'9'|'11')
            echo &quot;$mes tiene 30 dias&quot;;;
        *)
            echo &quot;$mes no es un mes correcto&quot;
    esac
done
exit 0
</code></pre>
<h2 id="leer-por-entrada-standard">leer por entrada standard</h2>
<pre><code>count=0
while read -r line
do
    count=$((count+1))
    echo &quot;$count: $line&quot;
done
exit 0
</code></pre>
<pre><code>MAX=$1
cont=1
while read -r line &amp;&amp; [ $cont -le $MAX ]
do
    echo &quot;$cont: $line&quot;
    cont=$((cont+1))

done
exit 0
</code></pre>
<h2 id="separar-opciones-con-shift">separar opciones con shift</h2>
<pre><code>opciones=''
argumentos=''
numeros=''
files=''
while [ -n &quot;$1&quot; ]
do
    case $1 in
        '-a') 
            files=$2
            shift;;
        '-c'|'-b'|'-e') 
            opciones=&quot;$opciones $1&quot;;;
        '-d') 
            numeros=$2
            shift;;
        *)  
            argumentos=&quot;$argumentos $1&quot;;;
    esac
    shift
done
echo &quot;opciones: $opciones&quot;
echo &quot;argumentos: $argumentos&quot;
echo &quot;numeros: $numeros&quot;
echo &quot;files: $files&quot;
exit 0
</code></pre>
<h2 id="mirar-si-es-directorio-regular-file">mirar si es directorio, regular file...</h2>
<pre><code>#files y dir a copiar
llistafiles=$(echo $* | cut -d' ' -f1-$(($#-1)))
dirdesti=$(echo $* | cut -d' ' -f$#)
#comprobar que sea un directorio
if ! [ -d $dirdesti ]
then
    echo &quot;error, no es un dir desti correcto&quot;
    exit 2
fi
# para cada file validada lo copiamos al dir
for file in $llistafiles
do 
    if ! [ -f $file ]
    then
        echo &quot;error, no es un file&quot; &gt;&gt; /dev/stderr
        exit 3
    fi
    cp $file $dirdesti/.
done
exit 0
</code></pre>
<pre><code>for dir in $*
do
    # miramos si es un help
    if [ $dir == &quot;--help&quot; -o $dir == &quot;-h&quot; ]
    then
        echo &quot;mostramos ayuda&quot;
        exit 0
    fi
    # verificar que es un dir
    if ! [ -d $dir ]
    then
        echo &quot;error arg no es un dir&quot;
        echo &quot;USAGE: prog.sh arg[dir]&quot;
        exit 2
    fi
    llistadir=$(ls $dir)
    count=1
    for file in $llistadir
    do
    #de cada cosa que imprime decir si es un regular file, dir, link o altre cosa
        if [ -d $dir/$file ]
        then
            echo &quot;es un directorio&quot;
            echo &quot;$count: $file&quot;
        elif [ -f $dir/$file ]
        then
            echo &quot;es un file&quot;
            echo &quot;$count: $file&quot;
        elif [ -d $dir/$file ]
        then
            echo &quot;es una altra cosa&quot;
            echo &quot;$count: $file&quot;
        fi
        count=$((count+1))
    done
done
exit 0
</code></pre>
<h2 id="mayusculas-copiar-buscar-ordenar">Mayusculas , copiar , buscar , ordenar</h2>
<p><code>tr</code><br />
echo "hola" | tr -s '[a-z]' '[A-Z]'<br />
echo "hola" | tr -s '[:blank:]' ' '  #'\t' tabulador</p>
<p><code>cut</code><br />
+ cut -d' ' -f1-5</p>
<blockquote>
<p>corta por campos y delimitador
+ cut -c1-50
corta por caracteres
llistafiles=$(echo $<em> | cut -d' ' -f1-$(($#-1)))<br />
dirdesti=$(echo $</em> | cut -d' ' -f$#)<br />
uid=$(echo $loginLine | cut -d: -f3)</p>
</blockquote>
<p><code>grep/egrep</code><br />
+ egrep "^[^ ]{10,}"</p>
<blockquote>
<p>busca de lo que se pase o line algo que tenga mas de 10 chars
+ echo $arg | egrep ".{4,}"
busca de lo que se pase que tenga mas de 4 chars
+ egrep "^$user:" /etc/passwd
buscar el campo user del /etc/passwd
+ egrep "^[^:]<em>:[^:]</em>:[^:]*:$gid:" /etc/passwd 
+ sort -u 2&gt; /dev/null)
ordenar unico y quita los repetidos
+ listshells=$(cut -d: -f7 /etc/passwd | sort -u 2&gt; /dev/null)</p>
</blockquote>
<h2 id="funciones">Funciones</h2>
<p>function nombreFuncion(){
    return xxxxx
}</p>
<pre><code>function showUser(){
    ERR_NARGS=1
    ERR_NOLOGIN=2
    OK=0
    #validar args
    if [ $# -ne 1 ]
    then
        echo &quot;ERR: num args incorrecte&quot;
        echo &quot;USAGE: $0 login&quot;
        return $ERR_NARGS
    fi
    #validar si existe el login
    login=$1
    userLine=$(egrep &quot;^$login:&quot; /etc/passwd 2&gt; /dev/null)
    if [ $? -ne 0 ]
    then
        echo &quot;ERR: el login $login no existe&quot;
        return $ERR_NOLOGIN
    fi
    #mostrar
    uid=$(echo $userLine | cut -d: -f3)
    gid=$(echo $userLine | cut -d: -f4)
    gecos=$(echo $userLine | cut -d: -f5)
    home=$(echo $userLine | cut -d: -f6)
    shell=$(echo $userLine | cut -d: -f7)
    echo &quot;uid: $uid&quot;
    echo &quot;gid: $gid&quot;
    echo &quot;gecos: $gecos&quot;
    echo &quot;home: $home&quot;
    echo &quot;shell: $shell&quot;
    return $OK
}
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../powershell/" class="btn btn-neutral float-right" title="PowerShell/CMD">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../java/" class="btn btn-neutral" title="Java"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../java/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../powershell/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
